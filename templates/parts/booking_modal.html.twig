<!-- Booking Modal Overlay -->
<div id="bookingModal" class="fixed inset-0 bg-black/70 z-[60] hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity duration-300">
    <div class="bg-white rounded-2xl w-full max-w-lg overflow-hidden shadow-2xl transform transition-all scale-95 opacity-0" id="bookingContent">

        <!-- Header -->
        <div class="bg-gray-900 px-6 py-4 flex justify-between items-center text-white">
            <h3 class="text-xl font-bold flex items-center gap-2">
                <i class="fas fa-calendar-alt text-pink-500"></i> Ամրագրել Այց
            </h3>
            <button id="bookingCloseButton" type="button" aria-label="Փակել ամրագրման պատուհանը" class="text-gray-400 hover:text-white transition">
                <i class="fas fa-times text-xl" aria-hidden="true"></i>
            </button>
        </div>

        <!-- Body -->
        <div class="p-6 max-h-[80vh] overflow-y-auto">
            <form id="bookingForm">

                <!-- Step 1: Service (global booking flow) -->
                <div class="mb-5" id="stepService">
                    <label class="block text-sm font-bold text-gray-700 mb-2">1. Ընտրեք Ծառայությունը</label>
                    <div class="relative">
                        <select id="serviceSelect"
                                required
                                class="w-full appearance-none border border-gray-300 rounded-lg bg-white px-3 py-2.5 pr-10 text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                            <option value="">-- Ընտրել --</option>
                            {% for service in (services is defined ? services : []) %}
                                <option value="{{ service.id }}">{{ service.name }} ({{ service.price }} AMD)</option>
                            {% endfor %}
                        </select>
                        <span class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </span>
                    </div>
                </div>

                <!-- Step 2: Artist -->
                <div class="mb-5 opacity-50 pointer-events-none transition-all" id="stepArtist">
                    <label class="block text-sm font-bold text-gray-700 mb-2">2. Ընտրեք Վարպետին</label>
                    <div class="relative">
                        <select id="artistSelect"
                                required
                                class="w-full appearance-none border border-gray-300 rounded-lg bg-white px-3 py-2.5 pr-10 text-left shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500">
                            <option value="">-- Նախ ընտրեք ծառայությունը --</option>
                        </select>
                        <span class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-500">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </span>
                    </div>
                </div>

                <!-- Step 3: Date -->
                <div class="mb-5 opacity-50 pointer-events-none transition-all" id="stepDate">
                    <label class="block text-sm font-bold text-gray-700 mb-2">3. Ընտրեք Օրը</label>
                    <input type="date" id="dateInput" class="w-full border-gray-300 rounded-lg shadow-sm focus:border-pink-500 focus:ring-pink-500 p-2.5 bg-gray-50 border">
                </div>

                <!-- Step 4: Time Slots -->
                <div class="mb-5 hidden" id="stepSlots">
                    <label class="block text-sm font-bold text-gray-700 mb-2">4. Ազատ Ժամեր</label>
                    <div id="slotsContainer" class="grid grid-cols-4 gap-2">
                        <!-- Slots will be injected here via JS -->
                    </div>
                    <input type="hidden" id="selectedTime" required>
                </div>

                <!-- Step 5: Client Info -->
                <div class="mb-5 hidden space-y-3" id="stepClient">
                    <hr class="border-gray-200">
                    <h4 class="font-bold text-pink-600">Ձեր Տվյալները</h4>
                    <input type="text" id="clientName" placeholder="Ձեր Անունը" required class="w-full rounded-lg border-gray-300 p-2 border">
                    <input type="tel" id="clientPhone" placeholder="Հեռախոս" required class="w-full rounded-lg border-gray-300 p-2 border">
                    <input type="email" id="clientEmail" placeholder="Email (կամայական)" class="w-full rounded-lg border-gray-300 p-2 border">

                    <button type="submit" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded-lg shadow-lg transition transform hover:scale-[1.02]">
                        Հաստատել Ամրագրումը
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>